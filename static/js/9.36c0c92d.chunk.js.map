{"version":3,"sources":["firebase/FireBaseRef.js","blockchain/publicEntryInfo.js","component/Loading/Loading.js","blockchain/loanDBInfo.js","blockchain/heartTokenInfo.js","blockchain/walletInfo.js","blockchain/contractInteract.js","assets/image/coupon_cover.jpg","component/CouponItem/CouponItem.js","component/RedeemedItem/RedeemedItem.js","container/CouponPage/CouponPage.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","database","web3","Web3","window","currentProvider","ABI","ProxyContract","abi","eth","Contract","Loading","show","src","LoadingIcon","alt","className","LoanDBContract","HeartTokenContract","WalletContract","callContract","contract","func","params","Promise","resolve","reject","a","methods","call","output","sendContract","send","once","result","console","log","sendContractPayable","amount","value","requestLoan","publicEntryInfo","then","catch","error","lendLoan","debtNo","payLoan","burnToken","withDraw","getLenderofDebt","loanDBInfo","getBorrowerofDebt","getAmountofDebt","getInterestofDebt","getStateofDebt","getLendHistory","address","getTokenBalance","heartTokenInfo","getWalletBalance","walletInfo","module","exports","CouponItem","props","image","id","title","disabled","canBeRedeemed","onClick","getCode","RedeemedItem","code","TabPanel","children","index","other","Typography","component","role","hidden","aria-labelledby","Box","p","a11yProps","connect","state","userAddr","useState","setValue","tokenBalance","setTokenBalance","redeemedCoupons","setRedeemedCoupon","loading","setLoading","useEffect","ref","orderByChild","equalTo","on","snapshot","productInfo","CouponList","filter","coupon","val","product","item","productCode","previousState","getCouponCode","receipt","generateString","couponData","push","Swal","fire","icon","text","message","CouponBackground","AppBar","position","color","Tabs","onChange","event","newValue","indicatorColor","textColor","variant","scrollButtons","aria-label","Tab","label","map","enddate","parseInt","key","length","Fragment"],"mappings":"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","file":"static/js/9.36c0c92d.chunk.js","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/database\";\nvar firebaseConfig = {\n  apiKey: \"AIzaSyCYq8IE7Q_7Mr8jq4GSehmF9zqXDyub0zA\",\n  authDomain: \"microfinance-cab4b.firebaseapp.com\",\n  databaseURL: \"https://microfinance-cab4b.firebaseio.com\",\n  projectId: \"microfinance-cab4b\",\n  storageBucket: \"microfinance-cab4b.appspot.com\",\n  messagingSenderId: \"814835183992\",\n  appId: \"1:814835183992:web:09791f4a233f4b837fd88d\"\n};\nfirebase.initializeApp(firebaseConfig);\nexport const database = firebase.database();\n","import Web3 from \"web3\";\nimport ProxyContract from \"../contracts/Proxy.json\";\nconst web3 = new Web3(window.web3.currentProvider);\nconst address = \"0x6a961cD4488CBCF843E9d2D26A4b8f79BdD1E0Bb\";\nconst ABI = ProxyContract.abi;\n\nexport default new web3.eth.Contract(ABI, address);\n","import React from \"react\";\nimport BackDrop from \"../BackDrop/BackDrop\";\nimport LoadingIcon from \"../../assets/image/loading-heart.svg\";\nfunction Loading() {\n  return (\n    <BackDrop show=\"true\">\n      <img src={LoadingIcon} alt=\"spinner\" className=\"spinner\" />\n    </BackDrop>\n  );\n}\n\nexport default Loading;\n","import Web3 from \"web3\";\nimport LoanDBContract from \"../contracts/LoanDB.json\";\nconst web3 = new Web3(window.web3.currentProvider);\nconst address = \"0x0CFD270A03C7A29611e16956551D2Fbd3b5326d7\";\nconst ABI = LoanDBContract.abi;\n\nexport default new web3.eth.Contract(ABI, address);\n","import Web3 from \"web3\";\nimport HeartTokenContract from \"../contracts/HeartToken.json\";\nconst web3 = new Web3(window.web3.currentProvider);\nconst address = \"0x1c9a901438CFe8b9Be686e7d8088E2E863194830\";\nconst ABI = HeartTokenContract.abi;\n\nexport default new web3.eth.Contract(ABI, address);\n","import Web3 from \"web3\";\nimport WalletContract from \"../contracts/Wallet.json\";\nconst web3 = new Web3(window.web3.currentProvider);\nconst address = \"0x80EE439859Dd2035bB812196E0fDCCCd56520076\";\nconst ABI = WalletContract.abi;\n\nexport default new web3.eth.Contract(ABI, address);\n","import publicEntryInfo from \"./publicEntryInfo\";\nimport loanDBInfo from \"./loanDBInfo\";\nimport heartTokenInfo from \"./heartTokenInfo\";\nimport walletInfo from \"./walletInfo\";\n//https://ethereum.stackexchange.com/questions/29044/dynamically-calling-a-function-on-a-contract\n//https://stackoverflow.com/questions/3914557/passing-arguments-forward-to-another-javascript-function\n\n// @notice dynamic call contract function that is able to call various parameters and handle parameters\n// @return corresponding output\nexport const callContract = (contract, func, ...params) => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const output = await contract.methods[func](...params).call();\n      resolve(output);\n    } catch (error) {\n      reject(error);\n    }\n  });\n};\n\n// @notice dynamic send contract function that is able to handle parameters\n// @return corresponding result object\nexport const sendContract = (contract, func, ...params) => {\n  return new Promise(async (resolve, reject) => {\n    try {\n      await contract.methods[func](...params)\n        .send()\n        .once(\"receipt\", async result => {\n          console.log(result);\n          resolve(result);\n        });\n    } catch (error) {\n      reject(error);\n    }\n  });\n};\nexport const sendContractPayable = (contract, func, amount, ...params) => {\n  return new Promise(async (resolve, reject) => {\n    console.log(amount);\n    try {\n      await contract.methods[func](...params)\n        .send({ value: amount })\n        .once(\"receipt\", async result => {\n          console.log(result);\n          resolve(result);\n        });\n    } catch (error) {\n      reject(error);\n    }\n  });\n};\n\n// @notice Proxy contract, functions that change state.\nexport const requestLoan = amount => {\n  return new Promise((resolve, reject) => {\n    sendContract(publicEntryInfo, \"postRequest\", amount)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\nexport const lendLoan = (debtNo, amount) => {\n  return new Promise((resolve, reject) => {\n    sendContractPayable(publicEntryInfo, \"lendLoan\", amount, debtNo)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\nexport const payLoan = (debtNo, amount) => {\n  return new Promise((resolve, reject) => {\n    sendContractPayable(publicEntryInfo, \"payLoan\", amount, debtNo)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\nexport const burnToken = amount => {\n  return new Promise((resolve, reject) => {\n    sendContract(publicEntryInfo, \"burnToken\", amount)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\nexport const withDraw = amount => {\n  return new Promise((resolve, reject) => {\n    sendContract(publicEntryInfo, \"withDraw\", amount)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\n// @notice LoanDB contract, functions that get state.\n\nexport const checkHaveDebt = address => {\n  return new Promise((resolve, reject) => {\n    callContract(loanDBInfo, \"checkHaveDebt\", address)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\nexport const getLenderofDebt = debtNo => {\n  return new Promise((resolve, reject) => {\n    callContract(loanDBInfo, \"getLenderofDebt\", debtNo)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\nexport const getBorrowerofDebt = debtNo => {\n  return new Promise((resolve, reject) => {\n    callContract(loanDBInfo, \"getBorrowerofDebt\", debtNo)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\nexport const getAmountofDebt = debtNo => {\n  return new Promise((resolve, reject) => {\n    callContract(loanDBInfo, \"getAmountofDebt\", debtNo)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\nexport const getInterestofDebt = debtNo => {\n  return new Promise((resolve, reject) => {\n    callContract(loanDBInfo, \"getInterestofDebt\", debtNo)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\nexport const getStateofDebt = debtNo => {\n  return new Promise((resolve, reject) => {\n    callContract(loanDBInfo, \"getStateofDebt\", debtNo)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\nexport const getDebtHistory = address => {\n  return new Promise((resolve, reject) => {\n    callContract(loanDBInfo, \"getDebtHistory\", address)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\nexport const getLendHistory = address => {\n  return new Promise((resolve, reject) => {\n    callContract(loanDBInfo, \"getLendHistory\", address)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\n// @notice Heart token contract. Get state functions.\n\nexport const getTokenBalance = address => {\n  return new Promise((resolve, reject) => {\n    callContract(heartTokenInfo, \"balanceOf\", address)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n\nexport const getWalletBalance = address => {\n  return new Promise((resolve, reject) => {\n    callContract(walletInfo, \"depositsOf\", address)\n      .then(result => resolve(result))\n      .catch(error => reject(error));\n  });\n};\n","module.exports = __webpack_public_path__ + \"static/media/coupon_cover.4e84d0d9.jpg\";","import React from \"react\";\nimport \"./CouponItem.scss\";\nfunction CouponItem(props) {\n  return (\n    <div className=\"coupon_item\">\n      <img src={props.image} alt=\"item-background\" />\n      <p className=\"coupon_item__title\">{props.id}</p>\n      <p className=\"coupon_item__description\">{props.title}</p>\n      <div className=\"coupon_item__button\">\n        <p>{props.amount} Heart Token</p>\n        <button\n          className=\"btn btn--blue\"\n          disabled={!props.canBeRedeemed}\n          onClick={() => props.getCode(props.id, props.amount)}\n        >\n          Redeem\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default CouponItem;\n","import React from \"react\";\nimport \"./RedeemedItem.scss\";\nfunction RedeemedItem(props) {\n  return (\n    <div className=\"redeemed_item\">\n      <img src={props.image} alt=\"item-background\" />\n      <p className=\"redeemed_item__title\">{props.id}</p>\n      <p className=\"redeemed_item__description\">{props.code}</p>\n    </div>\n  );\n}\n\nexport default RedeemedItem;\n","import React, { useState, useEffect } from \"react\";\nimport \"./CouponPage.scss\";\nimport CouponBackground from \"../../assets/image/coupon_cover.jpg\";\nimport PropTypes from \"prop-types\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Tabs from \"@material-ui/core/Tabs\";\nimport Tab from \"@material-ui/core/Tab\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Box from \"@material-ui/core/Box\";\nimport CouponItem from \"../../component/CouponItem/CouponItem\";\nimport RedeemedItem from \"../../component/RedeemedItem/RedeemedItem\";\nimport CouponList from \"../../scripts/couponList.json\";\nimport { getTokenBalance, burnToken } from \"../../blockchain/contractInteract\";\nimport Loading from \"../../component/Loading/Loading\";\nimport Swal from \"sweetalert2\";\nimport { connect } from \"react-redux\";\nimport { generateString } from \"../../scripts/utility\";\nimport { database } from \"../../firebase/FireBaseRef\";\nfunction TabPanel(props) {\n  const { children, value, index, ...other } = props;\n\n  return (\n    <Typography\n      component=\"div\"\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`scrollable-auto-tabpanel-${index}`}\n      aria-labelledby={`scrollable-auto-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box p={3}>{children}</Box>}\n    </Typography>\n  );\n}\n\nTabPanel.propTypes = {\n  children: PropTypes.node,\n  index: PropTypes.any.isRequired,\n  value: PropTypes.any.isRequired\n};\n\nfunction a11yProps(index) {\n  return {\n    id: `scrollable-auto-tab-${index}`,\n    \"aria-controls\": `scrollable-auto-tabpanel-${index}`\n  };\n}\n\nfunction CouponPage(props) {\n  const { userAddr } = props;\n  const [value, setValue] = useState(0);\n  const [tokenBalance, setTokenBalance] = useState(0);\n  const [redeemedCoupons, setRedeemedCoupon] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const handleChange = (event, newValue) => {\n    setValue(newValue);\n  };\n  useEffect(() => {\n    getTokenBalance(userAddr).then(result => setTokenBalance(result));\n    let getCouponData = database.ref(\"coupon\");\n    getCouponData\n      .orderByChild(\"userAddr\")\n      .equalTo(userAddr)\n      .on(\"child_added\", async function(snapshot) {\n        let productInfo = CouponList.filter(coupon => {\n          return coupon.id === snapshot.val().product;\n        });\n        let item = {\n          product: snapshot.val().product,\n          productCode: snapshot.val().productCode,\n          image: productInfo[0].image\n        };\n        setRedeemedCoupon(previousState => [...previousState, item]);\n      });\n  }, [userAddr]);\n  const getCouponCode = async (product, amount) => {\n    setLoading(true);\n    try {\n      const receipt = await burnToken(amount);\n      console.log(receipt);\n      const productCode = product + generateString(5);\n      let couponData = { product, productCode, userAddr };\n      await database.ref(\"coupon\").push(couponData);\n      Swal.fire({\n        icon: \"success\",\n        title: \"Redeemed successfully\",\n        text: `Your coupon code : ${couponData.productCode}`\n      });\n      getTokenBalance(userAddr).then(result => setTokenBalance(result));\n      setLoading(false);\n    } catch (error) {\n      Swal.fire({\n        icon: \"error\",\n        title: error.message\n      });\n      setLoading(false);\n    }\n  };\n  return (\n    <div className=\"coupon\">\n      {loading && <Loading />}\n      <img\n        src={CouponBackground}\n        alt=\"coupon-background\"\n        className=\"coupon__banner\"\n      />\n      <div className=\"coupon__balance\">\n        <p>\n          Balance: <span>{tokenBalance}</span> Heart Token\n        </p>\n      </div>\n      <AppBar position=\"static\" color=\"default\">\n        <Tabs\n          value={value}\n          onChange={handleChange}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable auto tabs example\"\n          className=\"coupon__tab\"\n        >\n          <Tab label=\"Coupon\" {...a11yProps(0)} />\n          <Tab label=\"Redeemed\" {...a11yProps(1)} />\n        </Tabs>\n      </AppBar>\n      <TabPanel value={value} index={0}>\n        <div className=\"coupon__items\">\n          {CouponList.map(item => (\n            <CouponItem\n              image={item.image}\n              id={item.id}\n              amount={item.amount}\n              title={item.title}\n              enddate={item.enddate}\n              canBeRedeemed={parseInt(item.amount) <= parseInt(tokenBalance)}\n              getCode={getCouponCode}\n              key={item.id}\n            />\n          ))}\n        </div>\n      </TabPanel>\n      <TabPanel value={value} index={1}>\n        <div className=\"coupon__items\">\n          {redeemedCoupons.length === 0 ? (\n            <span>No Redeemed Coupon</span>\n          ) : (\n            <React.Fragment>\n              {redeemedCoupons.map(coupon => (\n                <RedeemedItem\n                  image={coupon.image}\n                  id={coupon.product}\n                  key={coupon.productCode}\n                  title={coupon.product}\n                  code={coupon.productCode}\n                  enddate={coupon.enddate}\n                />\n              ))}\n            </React.Fragment>\n          )}\n        </div>\n      </TabPanel>\n    </div>\n  );\n}\nconst mapStateToProps = state => {\n  return {\n    userAddr: state.address\n  };\n};\nexport default connect(mapStateToProps)(CouponPage);\n"],"sourceRoot":""}